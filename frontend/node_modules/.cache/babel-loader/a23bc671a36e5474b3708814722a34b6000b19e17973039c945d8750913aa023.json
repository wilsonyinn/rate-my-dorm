{"ast":null,"code":"import invariant from 'invariant';\nimport * as React from 'react';\nimport { DialogsContext } from \"./DialogsContext.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Provider for Dialog stacks. The subtree of this component can use the `useDialogs` hook to\n * access the dialogs API. The dialogs are rendered in the order they are requested.\n *\n * Demos:\n *\n * - [useDialogs](https://mui.com/toolpad/core/react-use-dialogs/)\n *\n * API:\n *\n * - [DialogsProvider API](https://mui.com/toolpad/core/api/dialogs-provider)\n */\nfunction DialogsProvider(props) {\n  const {\n    children,\n    unmountAfter = 1000\n  } = props;\n  const [stack, setStack] = React.useState([]);\n  const keyPrefix = React.useId();\n  const nextId = React.useRef(0);\n  const requestDialog = React.useCallback(function open(Component, payload, options = {}) {\n    const {\n      onClose = async () => {}\n    } = options;\n    let resolve;\n    const promise = new Promise(resolveImpl => {\n      resolve = resolveImpl;\n    });\n    invariant(resolve, 'resolve not set');\n    const key = `${keyPrefix}-${nextId.current}`;\n    nextId.current += 1;\n    const newEntry = {\n      key,\n      open: true,\n      promise,\n      Component,\n      payload,\n      onClose,\n      resolve\n    };\n    setStack(prevStack => [...prevStack, newEntry]);\n    return promise;\n  }, [keyPrefix]);\n  const closeDialogUi = React.useCallback(function closeDialogUi(dialog) {\n    setStack(prevStack => prevStack.map(entry => entry.promise === dialog ? {\n      ...entry,\n      open: false\n    } : entry));\n    setTimeout(() => {\n      // wait for closing animation\n      setStack(prevStack => prevStack.filter(entry => entry.promise !== dialog));\n    }, unmountAfter);\n  }, [unmountAfter]);\n  const closeDialog = React.useCallback(async function closeDialog(dialog, result) {\n    const entryToClose = stack.find(entry => entry.promise === dialog);\n    invariant(entryToClose, 'dialog not found');\n    await entryToClose.onClose(result);\n    entryToClose.resolve(result);\n    closeDialogUi(dialog);\n    return dialog;\n  }, [stack, closeDialogUi]);\n  const contextValue = React.useMemo(() => ({\n    open: requestDialog,\n    close: closeDialog\n  }), [requestDialog, closeDialog]);\n  return /*#__PURE__*/_jsxs(DialogsContext.Provider, {\n    value: contextValue,\n    children: [children, stack.map(({\n      key,\n      open,\n      Component,\n      payload,\n      promise\n    }) => /*#__PURE__*/_jsx(Component, {\n      payload: payload,\n      open: open,\n      onClose: async result => {\n        await closeDialog(promise, result);\n      }\n    }, key))]\n  });\n}\nexport { DialogsProvider };","map":{"version":3,"names":["invariant","React","DialogsContext","jsx","_jsx","jsxs","_jsxs","DialogsProvider","props","children","unmountAfter","stack","setStack","useState","keyPrefix","useId","nextId","useRef","requestDialog","useCallback","open","Component","payload","options","onClose","resolve","promise","Promise","resolveImpl","key","current","newEntry","prevStack","closeDialogUi","dialog","map","entry","setTimeout","filter","closeDialog","result","entryToClose","find","contextValue","useMemo","close","Provider","value"],"sources":["/Users/wilson/Documents/rate-my-dorm/node_modules/@toolpad/core/useDialogs/DialogsProvider.js"],"sourcesContent":["import invariant from 'invariant';\nimport * as React from 'react';\nimport { DialogsContext } from \"./DialogsContext.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Provider for Dialog stacks. The subtree of this component can use the `useDialogs` hook to\n * access the dialogs API. The dialogs are rendered in the order they are requested.\n *\n * Demos:\n *\n * - [useDialogs](https://mui.com/toolpad/core/react-use-dialogs/)\n *\n * API:\n *\n * - [DialogsProvider API](https://mui.com/toolpad/core/api/dialogs-provider)\n */\nfunction DialogsProvider(props) {\n  const {\n    children,\n    unmountAfter = 1000\n  } = props;\n  const [stack, setStack] = React.useState([]);\n  const keyPrefix = React.useId();\n  const nextId = React.useRef(0);\n  const requestDialog = React.useCallback(function open(Component, payload, options = {}) {\n    const {\n      onClose = async () => {}\n    } = options;\n    let resolve;\n    const promise = new Promise(resolveImpl => {\n      resolve = resolveImpl;\n    });\n    invariant(resolve, 'resolve not set');\n    const key = `${keyPrefix}-${nextId.current}`;\n    nextId.current += 1;\n    const newEntry = {\n      key,\n      open: true,\n      promise,\n      Component,\n      payload,\n      onClose,\n      resolve\n    };\n    setStack(prevStack => [...prevStack, newEntry]);\n    return promise;\n  }, [keyPrefix]);\n  const closeDialogUi = React.useCallback(function closeDialogUi(dialog) {\n    setStack(prevStack => prevStack.map(entry => entry.promise === dialog ? {\n      ...entry,\n      open: false\n    } : entry));\n    setTimeout(() => {\n      // wait for closing animation\n      setStack(prevStack => prevStack.filter(entry => entry.promise !== dialog));\n    }, unmountAfter);\n  }, [unmountAfter]);\n  const closeDialog = React.useCallback(async function closeDialog(dialog, result) {\n    const entryToClose = stack.find(entry => entry.promise === dialog);\n    invariant(entryToClose, 'dialog not found');\n    await entryToClose.onClose(result);\n    entryToClose.resolve(result);\n    closeDialogUi(dialog);\n    return dialog;\n  }, [stack, closeDialogUi]);\n  const contextValue = React.useMemo(() => ({\n    open: requestDialog,\n    close: closeDialog\n  }), [requestDialog, closeDialog]);\n  return /*#__PURE__*/_jsxs(DialogsContext.Provider, {\n    value: contextValue,\n    children: [children, stack.map(({\n      key,\n      open,\n      Component,\n      payload,\n      promise\n    }) => /*#__PURE__*/_jsx(Component, {\n      payload: payload,\n      open: open,\n      onClose: async result => {\n        await closeDialog(promise, result);\n      }\n    }, key))]\n  });\n}\nexport { DialogsProvider };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}