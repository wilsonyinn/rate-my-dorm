{"ast":null,"code":"import invariant from 'invariant';\nimport * as React from 'react';\nimport { DialogsContext } from \"./DialogsContext.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Provider for Dialog stacks. The subtree of this component can use the `useDialogs` hook to\n * access the dialogs API. The dialogs are rendered in the order they are requested.\n *\n * Demos:\n *\n * - [useDialogs](https://mui.com/toolpad/core/react-use-dialogs/)\n *\n * API:\n *\n * - [DialogsProvider API](https://mui.com/toolpad/core/api/dialogs-provider)\n */\nfunction DialogsProvider(props) {\n  const {\n    children,\n    unmountAfter = 1000\n  } = props;\n  const [stack, setStack] = React.useState([]);\n  const keyPrefix = React.useId();\n  const nextId = React.useRef(0);\n  const requestDialog = React.useCallback(function open(Component, payload) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const {\n      onClose = async () => {}\n    } = options;\n    let resolve;\n    const promise = new Promise(resolveImpl => {\n      resolve = resolveImpl;\n    });\n    invariant(resolve, 'resolve not set');\n    const key = \"\".concat(keyPrefix, \"-\").concat(nextId.current);\n    nextId.current += 1;\n    const newEntry = {\n      key,\n      open: true,\n      promise,\n      Component,\n      payload,\n      onClose,\n      resolve\n    };\n    setStack(prevStack => [...prevStack, newEntry]);\n    return promise;\n  }, [keyPrefix]);\n  const closeDialogUi = React.useCallback(function closeDialogUi(dialog) {\n    setStack(prevStack => prevStack.map(entry => entry.promise === dialog ? {\n      ...entry,\n      open: false\n    } : entry));\n    setTimeout(() => {\n      // wait for closing animation\n      setStack(prevStack => prevStack.filter(entry => entry.promise !== dialog));\n    }, unmountAfter);\n  }, [unmountAfter]);\n  const closeDialog = React.useCallback(async function closeDialog(dialog, result) {\n    const entryToClose = stack.find(entry => entry.promise === dialog);\n    invariant(entryToClose, 'dialog not found');\n    await entryToClose.onClose(result);\n    entryToClose.resolve(result);\n    closeDialogUi(dialog);\n    return dialog;\n  }, [stack, closeDialogUi]);\n  const contextValue = React.useMemo(() => ({\n    open: requestDialog,\n    close: closeDialog\n  }), [requestDialog, closeDialog]);\n  return /*#__PURE__*/_jsxs(DialogsContext.Provider, {\n    value: contextValue,\n    children: [children, stack.map(_ref => {\n      let {\n        key,\n        open,\n        Component,\n        payload,\n        promise\n      } = _ref;\n      return /*#__PURE__*/_jsx(Component, {\n        payload: payload,\n        open: open,\n        onClose: async result => {\n          await closeDialog(promise, result);\n        }\n      }, key);\n    })]\n  });\n}\nexport { DialogsProvider };","map":{"version":3,"names":["invariant","React","DialogsContext","jsx","_jsx","jsxs","_jsxs","DialogsProvider","props","children","unmountAfter","stack","setStack","useState","keyPrefix","useId","nextId","useRef","requestDialog","useCallback","open","Component","payload","options","arguments","length","undefined","onClose","resolve","promise","Promise","resolveImpl","key","concat","current","newEntry","prevStack","closeDialogUi","dialog","map","entry","setTimeout","filter","closeDialog","result","entryToClose","find","contextValue","useMemo","close","Provider","value","_ref"],"sources":["/Users/wilson/Documents/rate-my-dorm/node_modules/@toolpad/core/useDialogs/DialogsProvider.js"],"sourcesContent":["import invariant from 'invariant';\nimport * as React from 'react';\nimport { DialogsContext } from \"./DialogsContext.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Provider for Dialog stacks. The subtree of this component can use the `useDialogs` hook to\n * access the dialogs API. The dialogs are rendered in the order they are requested.\n *\n * Demos:\n *\n * - [useDialogs](https://mui.com/toolpad/core/react-use-dialogs/)\n *\n * API:\n *\n * - [DialogsProvider API](https://mui.com/toolpad/core/api/dialogs-provider)\n */\nfunction DialogsProvider(props) {\n  const {\n    children,\n    unmountAfter = 1000\n  } = props;\n  const [stack, setStack] = React.useState([]);\n  const keyPrefix = React.useId();\n  const nextId = React.useRef(0);\n  const requestDialog = React.useCallback(function open(Component, payload, options = {}) {\n    const {\n      onClose = async () => {}\n    } = options;\n    let resolve;\n    const promise = new Promise(resolveImpl => {\n      resolve = resolveImpl;\n    });\n    invariant(resolve, 'resolve not set');\n    const key = `${keyPrefix}-${nextId.current}`;\n    nextId.current += 1;\n    const newEntry = {\n      key,\n      open: true,\n      promise,\n      Component,\n      payload,\n      onClose,\n      resolve\n    };\n    setStack(prevStack => [...prevStack, newEntry]);\n    return promise;\n  }, [keyPrefix]);\n  const closeDialogUi = React.useCallback(function closeDialogUi(dialog) {\n    setStack(prevStack => prevStack.map(entry => entry.promise === dialog ? {\n      ...entry,\n      open: false\n    } : entry));\n    setTimeout(() => {\n      // wait for closing animation\n      setStack(prevStack => prevStack.filter(entry => entry.promise !== dialog));\n    }, unmountAfter);\n  }, [unmountAfter]);\n  const closeDialog = React.useCallback(async function closeDialog(dialog, result) {\n    const entryToClose = stack.find(entry => entry.promise === dialog);\n    invariant(entryToClose, 'dialog not found');\n    await entryToClose.onClose(result);\n    entryToClose.resolve(result);\n    closeDialogUi(dialog);\n    return dialog;\n  }, [stack, closeDialogUi]);\n  const contextValue = React.useMemo(() => ({\n    open: requestDialog,\n    close: closeDialog\n  }), [requestDialog, closeDialog]);\n  return /*#__PURE__*/_jsxs(DialogsContext.Provider, {\n    value: contextValue,\n    children: [children, stack.map(({\n      key,\n      open,\n      Component,\n      payload,\n      promise\n    }) => /*#__PURE__*/_jsx(Component, {\n      payload: payload,\n      open: open,\n      onClose: async result => {\n        await closeDialog(promise, result);\n      }\n    }, key))]\n  });\n}\nexport { DialogsProvider };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}